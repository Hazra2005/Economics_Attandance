<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Attendance System</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
*{margin:0;padding:0;box-sizing:border-box;}

body{
font-family:'Poppins',sans-serif;
background:linear-gradient(135deg,#4e73df,#1cc88a);
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
padding:20px;
}

.wrapper{
width:100%;
max-width:400px;
}

/* Title Box */
.title-box{
background:white;
padding:20px;
border-radius:20px;
text-align:center;
margin-bottom:20px;
box-shadow:0 10px 25px rgba(0,0,0,0.2);
}

.title-box h1{
font-size:22px;
color:#4e73df;
}

/* Login Box */
.login-box{
background:white;
padding:25px;
border-radius:20px;
box-shadow:0 15px 35px rgba(0,0,0,0.3);
}

.login-box h3{
text-align:center;
margin-bottom:20px;
color:#444;
}

/* Role Buttons */
.role-buttons{
display:flex;
gap:10px;
margin-bottom:20px;
}

.role-buttons button{
flex:1;
padding:12px;
border-radius:12px;
border:none;
font-weight:600;
cursor:pointer;
color:white;
}

.admin-btn{background:#4e73df;}
.student-btn{background:#1cc88a;}

.admin-btn:hover{background:#2e59d9;}
.student-btn:hover{background:#17a673;}

input{
width:100%;
padding:12px;
border-radius:12px;
border:1px solid #ddd;
margin-bottom:15px;
}

/* Password */
.password-wrapper{
position:relative;
}

.password-wrapper input{
padding-right:60px;
margin-bottom:0;
}

.toggle-btn{
position:absolute;
right:10px;
top:50%;
transform:translateY(-50%);
background:none;
border:none;
color:#4e73df;
font-weight:600;
cursor:pointer;
}

/* Remember Me (Proper Left Alignment) */
.remember{
display:flex;
align-items:center;
justify-content:flex-start;
gap:8px;
margin:15px 0;
font-size:14px;
}

.remember input{
width:16px;
height:16px;
margin:0;
flex-shrink:0;
cursor:pointer;
}

.remember label{
margin:0;
cursor:pointer;
user-select:none;
}

/* Login Button */
.login-btn{
width:100%;
padding:12px;
border-radius:12px;
border:none;
background:#4e73df;
color:white;
font-weight:600;
cursor:pointer;
}

.hidden{display:none;}

/* Full Screen Loader */
.full-loader{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(255,255,255,0.9);
display:none;
justify-content:center;
align-items:center;
flex-direction:column;
z-index:9999;
}

.spinner{
width:50px;
height:50px;
border:5px solid #ddd;
border-top:5px solid #4e73df;
border-radius:50%;
animation:spin 1s linear infinite;
}

.loading-text{
margin-top:15px;
font-weight:600;
color:#4e73df;
}

@keyframes spin{
0%{transform:rotate(0deg);}
100%{transform:rotate(360deg);}
}

@media(max-width:480px){
.title-box h1{font-size:20px;}
}
</style>
</head>

<body>

<!-- Full Screen Loader -->
<div class="full-loader" id="loader">
<div class="spinner"></div>
<div class="loading-text">Logging in...</div>
</div>

<div class="wrapper">

<div class="title-box">
<h1>Attendance System üìò</h1>
</div>

<div class="login-box">

<h3>Login As</h3>

<div class="role-buttons">
<button class="admin-btn" onclick="showAdmin()">Admin üë®üèª‚Äçüíº</button>
<button class="student-btn" onclick="goStudent()">Student üéì</button>
</div>

<div id="adminSection" class="hidden">

<input type="text" id="username" placeholder="Username">

<div class="password-wrapper">
<input type="password" id="password" placeholder="Password">
<button type="button" class="toggle-btn" onclick="togglePassword()">Show</button>
</div>

<div class="remember">
<input type="checkbox" id="remember">
<label for="remember">Remember Me</label>
</div>

<button class="login-btn" onclick="adminLogin()">Login</button>

</div>

</div>
</div>

<script>

const SCRIPT_URL="https://script.google.com/macros/s/AKfycbyLZWOug-UBtNm9hRbPDNT7UJtYtETAF4Vq7iPV_Wnmc38D_Wyyxpy4rq-0a37T3i7pVQ/exec";

function showAdmin(){
document.getElementById("adminSection").classList.remove("hidden");
}

function goStudent(){
window.location.href="student.html";
}

function togglePassword(){
let pass=document.getElementById("password");
let btn=document.querySelector(".toggle-btn");

if(pass.type==="password"){
pass.type="text";
btn.innerText="Hide";
}else{
pass.type="password";
btn.innerText="Show";
}
}

function adminLogin(){

let user=document.getElementById("username").value;
let pass=document.getElementById("password").value;
let remember=document.getElementById("remember").checked;
let loader=document.getElementById("loader");

loader.style.display="flex";

fetch(SCRIPT_URL,{
method:"POST",
body:JSON.stringify({
action:"login",
username:user,
password:pass
})
})
.then(res=>res.json())
.then(data=>{

if(data.status==="success"){

if(remember){
localStorage.setItem("savedUser",user);
localStorage.setItem("savedPass",pass);
}else{
localStorage.removeItem("savedUser");
localStorage.removeItem("savedPass");
}

sessionStorage.setItem("adminLoggedIn","true");
window.location.href="admin.html";

}else{
loader.style.display="none";
alert("Invalid Username or Password ‚ùå");
}

})
.catch(()=>{
loader.style.display="none";
alert("Connection Error ‚ö†");
});
}

window.onload=function(){
let savedUser=localStorage.getItem("savedUser");
let savedPass=localStorage.getItem("savedPass");

if(savedUser && savedPass){
document.getElementById("username").value=savedUser;
document.getElementById("password").value=savedPass;
document.getElementById("remember").checked=true;
document.getElementById("adminSection").classList.remove("hidden");
}
}

</script>

</body>
</html>
